{% extends "admin/base.html" %}
{% block title %}Ofertas do Dia{% endblock %}
{% block page_title %}Ofertas do Dia{% endblock %}

{% block content %}
<p style="color: var(--text-light); margin-bottom: 30px;">
    Gerencie os descontos e promo√ß√µes dispon√≠veis na loja.
</p>

<div class="data-table">
    <div class="table-header">
        <h3>Ofertas Ativas</h3>
        <div class="table-actions">
            <a href="{{ url_for('admin_nova_oferta') }}" class="btn btn-success">‚ûï Nova Oferta</a>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Produto</th>
                <th>Desconto (%)</th>
                <th>Pre√ßo Original</th>
                <th>Pre√ßo com Desconto</th>
                <th>Validade</th>
                <th>Status</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            {% for oferta in ofertas %}
            <tr>
                <td>{{ oferta.nome_produto }}</td>
                <td>{{ oferta.desconto }}%</td>
                <td>R$ {{ "%.2f"|format(oferta.preco_original) }}</td>
                <td><strong style="color: var(--success);">R$ {{ "%.2f"|format(oferta.preco_com_desconto) }}</strong></td>
                <td>{{ oferta.validade.strftime('%d/%m/%Y') if oferta.validade else '-' }}</td>
                <td>
                    {% if oferta.ativa %}
                        <span class="badge badge-success">Ativa</span>
                    {% else %}
                        <span class="badge badge-danger">Inativa</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('admin_editar_oferta', id_oferta=oferta.id_oferta) }}" 
                       class="btn btn-sm btn-primary">‚úèÔ∏è Editar</a>
                    <a href="{{ url_for('admin_excluir_oferta', id_oferta=oferta.id_oferta) }}" 
                       class="btn btn-sm btn-danger" 
                       onclick="return confirm('Tem certeza que deseja remover esta oferta?')">üóëÔ∏è Excluir</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" style="text-align:center; padding: 40px; color: var(--text-light); font-size: 16px;">
                    üì≠ Nenhuma oferta cadastrada ainda.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
/* Ajustes para tema escuro */
.dark-theme .data-table {
    background: rgba(26, 29, 41, 0.9);
    border-color: #2d3748;
}

.dark-theme .table-header {
    background: rgba(51, 133, 255, 0.05);
    border-color: #2d3748;
}

.dark-theme table th {
    background: rgba(51, 133, 255, 0.08);
    color: #e2e8f0;
}

.dark-theme table td {
    color: #e2e8f0;
    border-color: #2d3748;
}

.dark-theme tr:hover {
    background: rgba(51, 133, 255, 0.05);
}

/* Destaque do pre√ßo com desconto */
td strong {
    font-size: 1.1em;
}
</style>
{% endblock %}