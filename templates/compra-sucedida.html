{% extends 'base.html' %}
{% set titulo = "Compra Conclu√≠da" %}
{% block conteudo %}

<style>
  .success-container {
      max-width: 600px;
      margin: 80px auto;
      background: var(--glass);
      padding: 40px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      text-align: center;
  }

  .success-title {
      font-size: 2.5em;
      font-weight: 800;
      color: var(--success);
      margin-bottom: 20px;
  }

  .success-message {
      font-size: 1.2em;
      color: var(--text);
      margin-bottom: 30px;
  }

  .pix-section {
      margin-top: 30px;
      background: rgba(0, 255, 170, 0.05);
      border-radius: 15px;
      padding: 25px;
      border: 1px solid var(--border);
  }

  .pix-section img {
      width: 240px;
      border-radius: 12px;
      margin-bottom: 15px;
  }

  .pix-section textarea {
      width: 100%;
      height: 100px;
      resize: none;
      padding: 10px;
      border-radius: 10px;
      border: 2px solid var(--border);
      background: var(--secondary);
      color: var(--text);
      font-weight: 600;
  }

  .btn-copy {
      background: linear-gradient(135deg, var(--success) 0%, #00b36e 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 1em;
      border: none;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 10px;
  }

  .btn-copy:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
  }

  .btn-home {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 15px 30px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 1.1em;
      border: none;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      margin-top: 20px;
  }

  .btn-home:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow);
  }

  @media (max-width: 600px) {
      .success-container {
          padding: 25px;
      }
      .success-title {
          font-size: 2em;
      }
  }
</style>

<div class="success-container">
    <div class="success-title">üéâ Compra Conclu√≠da!</div>
    <div class="success-message">
        Obrigado por comprar conosco.<br>
        Seu pedido foi processado com sucesso!
    </div>

    {% if qr_base64 %}
    <div class="pix-section">
        <h3>üí∏ Pagamento via PIX</h3>
        <p>Valor total: <strong>R$ {{ "%.2f"|format(valor) }}</strong></p>
        <img src="data:image/png;base64,{{ qr_base64 }}" alt="QR Code PIX">

        <p><strong>C√≥digo PIX (Copia e Cola):</strong></p>
        <textarea readonly id="pix-code">{{ copia_cola }}</textarea>
        <button class="btn-copy" onclick="copiarPix()">üìã Copiar C√≥digo</button>
    </div>
    {% endif %}

    <a href="{{ url_for('listar_produtos') }}" class="btn-home">üè† Voltar ao In√≠cio</a>
</div>

<script>
function copiarPix() {
    const codigo = document.getElementById('pix-code');
    codigo.select();
    navigator.clipboard.writeText(codigo.value);
    alert("‚úÖ C√≥digo PIX copiado!");
}
</script>

{% endblock %}
